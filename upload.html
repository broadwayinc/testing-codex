<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upload Photo</title>
    <script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>
    <script>
        const skapi = new Skapi('ap22oqBfHOrr8X4OeFEc', 'f8e16604-69e4-451c-9d90-4410f801c006');
        async function init(){
            const profile = await skapi.getProfile();
            if(!profile){
                location.href = 'index.html';
            }
        }
        function updateProgress(p){
            const prog = document.getElementById('progress');
            prog.style.display = 'block';
            prog.value = p.progress;
        }
        window.addEventListener('DOMContentLoaded', init);
    </script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Upload Photo</h1>
    <form action="gallery.html" enctype="multipart/form-data" onsubmit="skapi.postRecord(event, { table: 'photos', progress: updateProgress }).catch(err => { alert(err.message); })">
        <input name="description" placeholder="Description" required>
        <input type="file" name="picture" accept="image/*" required>
        <button type="submit">Upload</button>
        <progress id="progress" value="0" max="100" style="display:none;"></progress>
    </form>
    <a href="index.html">Home</a>
</body>
</html>
